<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org"
                xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head th:insert="fragments :: headerFiles">

<body>

  <header th:insert="fragments :: nav"></header>

    <div class="container">
        <h1 class="text-center border border-success border-bottom  border-0"  th:text="${titulo}"></h1>
        

        <table class="table table-dark">
            <thead>
               
                <tr >
                    <th>Cantidad</th>
                    <th >Id</th>
                    <th >Nombre</th>
                    <th  >Descripcion</th>
                    <th >Valor</th>
                    <th  >Stock</th>
                </tr>
            </thead>
            <tbody>
              <tr th:object="${producto}">
                  
                  <td>
                    <form th:action="@{/agreg(id=${producto.id},compra_id=${compra.id}, cliente_id=${cliente.id})}" th:if="${detalle}" th:object="${detalle}"  method="post">
           
                      <div class="form-group row">
                          <div class="col-sm-6">
                              <input type="number" th:field="*{cantidad}" class="form-control" th:errorclass="'form-control alert alert-danger'"/>
                              <small class="form-text text-danger"  th:if="${#fields.errors('cantidad')}" th:errors="*{cantidad}"></small>
                          </div>
                      </div>
                      
                      
                      <div class="form-group row">
                          <div class="col-sm-6">
                              <input type="submit" value="Agregar al carrito" class="btn btn-primary" />
                          </div>
                      </div>
                      
                  </form>
                  </td>
                  <td th:text="${producto.id}"></td>
                  <td th:text="${producto.nombre}"></td>
                  <td th:text="${producto.descripcion}"></td>
                  <td th:text="${producto.valorUnidad}"></td>
                  <td th:text="${producto.stock}"></td>
              </tr>
          </tbody>
        </table>
      </div>

      <div>
       
      </div>

      <footer th:insert="fragments :: footer"></footer>
      <div th:insert="fragments :: scripts"></div>
</body>

</html>